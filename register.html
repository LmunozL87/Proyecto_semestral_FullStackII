<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro</title>
  <link rel="stylesheet" href="assets/main.css">
</head>
<body>
  <div class="login-container"> <!-- clase css del container del login-->
    <h2>Registro de Usuario</h2>
    <form id="registro">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required title="Ingresa tu nombre">

        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" name="apellido" required title="Ingresa tu apellido">

        <label for="rut">Rut:</label>
        <input type="text" id="rut" name="rut" required title="Ingresa tu rut sin puntos ni dígito verificador">

        <label for="sexo">Sexo:</label>
        <select id="sexo" name="sexo" required title="Selecciona tu sexo">
            <option value="">Seleccione</option>
            <option value="masculino">Masculino</option>
            <option value="femenino">Femenino</option>
            <option value="otro">Otro</option>
        </select>

        <label for="edad">Edad:</label>
        <input type="number" id="edad" name="edad" min="0" max="120" required title="Ingresa tu edad">

        <label for="correo">Correo electrónico:</label>
        <input type="text" id="correo" name="correo" required title="Ingresa tu correo electrónico">

        <label for="clave">Contraseña:</label>
        <input type="password" id="clave" name="clave" required title="Ingresa tu contraseña">

        <label for="confirmarClave">Confirmar contraseña:</label>
        <input type="password" id="confirmarClave" name="confirmarClave" required title="Ingresa nuevamente tu contraseña">

        <button type="submit">Registrarse</button>
    </form>
    <p>¿Ya tienes cuenta? <a href="login.html">Inicia sesión aquí</a></p>
  </div>

  <footer class="footer">
    ¿Necesitas ayuda? <a href="mailto:soporte@tuturno.com">Haz clic aquí</a>
  </footer>
  <script src="assets/main.js"></script>
  <script>

    //validacion de rut
    document.addEventListener('DOMContentLoaded', function () {

      document.getElementById('registro').addEventListener('submit', function(e) {

      //document: todo el HTML
      //querySelector('form)'): selecciona el formulario en el html
      //addEventListener('submit'): escucha el evento submit
      //function(e): función que se ejecuta cuando se envía el formulario

      const rut = document.getElementById('rut').value.trim();
      const correo = document.getElementById('correo').value.trim(); 
      const clave = document.getElementById('clave').value.trim();
      const confirmarClave = document.getElementById('confirmarClave').value.trim();

      //getElementById: selecciona el elemento por su id (usuario)
      //value: obtiene el valor del campo

      if (!validarRut(rut)) {
        e.preventDefault(); 
        alert('El RUT debe contener solo números, sin puntos ni dígito verificador.');
        document.getElementById('rut').focus();
        return;
      }  

      if (!validarCorreo(correo)) { //si el correo no es válido
        e.preventDefault(); // Detiene el envío del formulario
        alert("Correo electrónico inválido. Usa el formato usuario@dominio.com");//mensaje de alerta
        document.getElementById('correo').focus();
        return;
      }

      if (!validarContaseña(clave)) {
        e.preventDefault();
        alert('La contraseña debe tener al menos 8 caracteres, incluyendo mayúsculas, minúsculas, números y alguno de estos símbolos @,$,!,%,*,?,&.');
        document.getElementById('clave').focus();
        return;
      }

      if (clave !== confirmarClave){
        e.preventDefault();
        alert('Las contraseñas no coinciden.');
        document.getElementById('confirmarClave').focus();
        return;
      }
      e.preventDefault();
      window.location.href = 'calendar.html';
    });
  }); 
</script>
</body>
</html>
